!function(e,t){"object"==typeof exports&&"object"==typeof module?module.exports=t(require("react"),require("underscore"),require("classnames"),require("react-dom")):"function"==typeof define&&define.amd?define(["react","underscore","classnames","react-dom"],t):"object"==typeof exports?exports.ReactMGM=t(require("react"),require("underscore"),require("classnames"),require("react-dom")):e.ReactMGM=t(e.react,e.underscore,e.classnames,e["react-dom"])}(this,function(e,t,n,r){return function(e){function t(r){if(n[r])return n[r].exports;var a=n[r]={exports:{},id:r,loaded:!1};return e[r].call(a.exports,a,a.exports,t),a.loaded=!0,a.exports}var n={};return t.m=e,t.c=n,t.p="",t(0)}([function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{"default":e}}var a=n(8),o=r(a),s=n(11),i=r(s),l=n(20),u=r(l),c=n(17),d=r(c),f=n(9),p=r(f),h=n(21),m=r(h),g=n(4),_=r(g),v=n(18),y=r(v),b=n(16),P=r(b),w=n(15),j=r(w),T=n(19),N=r(T);n(22);var x={Flex:o.default,Infinite:P.default,Textarea:u.default,NProgress:d.default,Mask:p.default,Toast:m.default,Loading:_.default,Page:y.default,Header:j.default,Storage:N.default,Util:i.default};e.exports=x},function(t,n){t.exports=e},function(e,n){e.exports=t},function(e,t){e.exports=n},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{"default":e}}Object.defineProperty(t,"__esModule",{value:!0});var a=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},o=n(1),s=r(o),i=s.default.createClass({displayName:"Loading",render:function(){return s.default.createElement("div",a({},this.props,{className:"loading"}),s.default.createElement("div",{className:"loading-inner"},s.default.createElement("div",{className:"weui_loading_leaf weui_loading_leaf_0"}),s.default.createElement("div",{className:"weui_loading_leaf weui_loading_leaf_1"}),s.default.createElement("div",{className:"weui_loading_leaf weui_loading_leaf_2"}),s.default.createElement("div",{className:"weui_loading_leaf weui_loading_leaf_3"}),s.default.createElement("div",{className:"weui_loading_leaf weui_loading_leaf_4"}),s.default.createElement("div",{className:"weui_loading_leaf weui_loading_leaf_5"}),s.default.createElement("div",{className:"weui_loading_leaf weui_loading_leaf_6"}),s.default.createElement("div",{className:"weui_loading_leaf weui_loading_leaf_7"}),s.default.createElement("div",{className:"weui_loading_leaf weui_loading_leaf_8"}),s.default.createElement("div",{className:"weui_loading_leaf weui_loading_leaf_9"}),s.default.createElement("div",{className:"weui_loading_leaf weui_loading_leaf_10"}),s.default.createElement("div",{className:"weui_loading_leaf weui_loading_leaf_11"})))}});t.default=i},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{"default":e}}Object.defineProperty(t,"__esModule",{value:!0});var a=n(2),o=r(a),s=function(e,t){var n=e;return arguments.length<2?n:n=n.replace(/\{([\d\w\.]+)\}/g,function(e){var n=arguments[1].split("."),r=null;return o.default.each(n,function(e,n){r=n?r[e]:t[e]}),r})};t.default=s},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{"default":e}}Object.defineProperty(t,"__esModule",{value:!0});var a=n(2),o=r(a),s=function(e){return o.default.map(e,function(e,t){return[encodeURIComponent(t),"=",encodeURIComponent(e)].join("")}).join("&").replace(/%20/g,"+")};t.default=s},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{"default":e}}Object.defineProperty(t,"__esModule",{value:!0});var a=n(2),o=r(a),s=function(){var e=[],t=0;return{add:function(n){return n.__id=t++,e.push(n),n.__id},remove:function(t){e=o.default.filter(e,function(e){return e.__id!==t})},interceptor:{request:function(t){var n=Promise.resolve(t);return o.default.each(e,function(e){e.request&&(n=n.then(function(n){return e.request(n)||t}))}),n},response:function(t,n){var r=Promise.resolve(t);return o.default.each(e,function(e){e.response&&(r=r.then(function(t){return e.response(t,n)||t}))}),r},responseError:function(t,n){var r=Promise.reject(t);return o.default.each(e,function(e){e.responseError&&(r=r.catch(function(t){return Promise.reject(e.responseError(t,n)||t)}))}),r}}}}();t.default=s},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{"default":e}}Object.defineProperty(t,"__esModule",{value:!0});var a=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},o=n(1),s=r(o),i=n(3),l=r(i),u=n(2),c=r(u),d=s.default.createClass({displayName:"Flex",propTypes:{flex:s.default.PropTypes.oneOfType([s.default.PropTypes.number,s.default.PropTypes.bool]),auto:s.default.PropTypes.string,width:s.default.PropTypes.string,height:s.default.PropTypes.string,row:s.default.PropTypes.bool,column:s.default.PropTypes.bool,wrap:s.default.PropTypes.bool,nowrap:s.default.PropTypes.bool,justifyStart:s.default.PropTypes.bool,justifyEnd:s.default.PropTypes.bool,justifyCenter:s.default.PropTypes.bool,justifyBetween:s.default.PropTypes.bool,justifyAround:s.default.PropTypes.bool,alignStart:s.default.PropTypes.bool,alignEnd:s.default.PropTypes.bool,alignCenter:s.default.PropTypes.bool,alignBaseline:s.default.PropTypes.bool,alignStretch:s.default.PropTypes.bool},render:function(){var e=(0,l.default)({flex:!0,"flex-auto":this.props.auto,"flex-none":this.props.width||this.props.height,"flex-row":this.props.row,"flex-column":this.props.column,"flex-wrap":this.props.wrap,"flex-nowrap":this.props.nowrap,"flex-justify-start":this.props.justifyStart,"flex-justify-end":this.props.justifyEnd,"flex-justify-center":this.props.justifyCenter,"flex-justify-between":this.props.justifyBetween,"flex-justify-around":this.props.justifyAround,"flex-align-start":this.props.alignStart,"flex-align-end":this.props.alignEnd,"flex-align-center":this.props.alignCenter,"flex-align-baseline":this.props.alignBaseline,"flex-align-stretch":this.props.alignStretch},this.props.className),t=c.default.extend({},this.props.style);return this.props.flex&&(t.flex="boolean"==typeof this.props.flex?1:this.props.flex),this.props.height&&(t.height=this.props.height),this.props.width&&(t.width=this.props.width),s.default.createElement("div",a({},this.props,{className:e,style:t}),this.props.children)}});t.default=d},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{"default":e}}Object.defineProperty(t,"__esModule",{value:!0});var a=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},o=n(1),s=r(o),i=n(3),l=r(i),u=s.default.createClass({displayName:"Mask",propTypes:{transparent:s.default.PropTypes.bool,show:s.default.PropTypes.bool,opacity:s.default.PropTypes.number},getDefaultProps:function(){return{transparent:!1,show:!1}},render:function(){var e=(0,l.default)({mask:!this.props.transparent,"mask-transparent":this.props.transparent}),t={display:this.props.show?"block":"none",opacity:this.props.opacity};return s.default.createElement("div",a({},this.props,{className:e,style:t}))}});t.default=u},function(e,t){e.exports=r},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{"default":e}}var a=n(13),o=r(a),s=n(7),i=r(s),l=n(6),u=r(l),c=n(5),d=r(c),f=n(14),p=r(f),h=n(12),m=r(h);e.exports={Request:o.default,RequestInterceptor:i.default,format:d.default,param:u.default,visibility:p.default,is:m.default}},function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n={};n.weixin=function(){return/MicroMessenger/i.test(navigator.userAgent)},t.default=n},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{"default":e}}Object.defineProperty(t,"__esModule",{value:!0});var a=n(6),o=r(a),s=n(5),i=r(s),l=n(2),u=r(l),c=n(7),d=r(c),f=function(e){return d.default.interceptor.request(e)},p=function(e,t,n,r){var a="color: #8a6d3b;";return e.then(function(e){if(e.ok){var t=e.headers.get("content-type");return t.indexOf("text/html")>-1?e.text().then(function(e){return e.indexOf("title>登陆</title")>-1?Promise.reject("请登录!"):Promise.reject("未知错误！！！！！")}):e.json()}return Promise.reject((0,i.default)("服务器错误 {status} {statusText}",e))}).then(function(e){return d.default.interceptor.response(e,r)},function(e){return Promise.reject(d.default.interceptor.responseError(e,r))}).then(function(e){return n.indexOf(e.code)>-1?e:(console.log("%c*** Request url: %s、code: %s、msg: %s",a,t,e.code,e.msg),Promise.reject(e.msg||"未知错误"))}).catch(function(e){return console.log("%c*** Request catch %s",a,e),Promise.reject(""+e)})},h=function(e,t){this._data={},this.url=e,this.sucCode=[0],this.options=Object.assign({method:"get",headers:{Accept:"application/json"},credentials:"include"},t)};h.prototype={code:function(e){return u.default.isArray(e)?this.sucCode=this.sucCode.concat(e):this.sucCode.push(e),this},data:function(e){return this._data=Object.assign({},e),"[object Object]"===toString.call(this._data)&&(this._data=u.default.pick(this._data,function(e){return null!==e&&void 0!==e})),this},json:function(e){return this._data=JSON.stringify(e),this},_getConfig:function(){var e=this;return{url:e.url,data:e._data,sucCode:e.sucCode,options:e.options}},_setConfig:function(e){var t=this;t.url=e.url,t._data=e.data,t.sucCode=e.sucCode,t.options=e.options},_beforeRequest:function(){var e=this;return f(e._getConfig()).then(e._setConfig.bind(e))},get:function(){var e=this;return e._beforeRequest().then(function(){var t=(0,o.default)(e._data),n=e.url+(e.url.indexOf("?")>-1?"&":"?")+t;return p(fetch(n,e.options),e.url,e.sucCode,e._getConfig())})},post:function(){var e,t=this,n=t._data;return t.options.method="post",t._beforeRequest().then(function(){if("[object Object]"===toString.call(n)){e=new FormData;for(var r in n)e.append(r,n[r])}else e=n;return t.options.body=e,p(fetch(t.url,t.options),t.url,t.sucCode,t._getConfig())})}};var m=function(e,t){return new h(e,t)};t.default=m},function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){var t=!1,n=!1,r=e.getBoundingClientRect();return r.top<window.innerHeight&&r.bottom>0&&(t=!0),r.left<window.innerHeight&&r.right>0&&(n=!0),t&&n}},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{"default":e}}Object.defineProperty(t,"__esModule",{value:!0});var a=n(1),o=r(a),s=o.default.createClass({displayName:"Header",render:function(){return o.default.createElement("div",{className:"header"},this.props.left?this.props.left:o.default.createElement("a",{href:"",className:"button button-link pull-left header-left"},o.default.createElement("i",{className:"icon-angle-left"}),"返回"),this.props.right?this.props.right:null,o.default.createElement("h1",{className:"header-title"},this.props.title))},handleBack:function(e){e.stopPropagation(),e.preventDefault(),this.props.history&&this.props.history.go(-1)}});t.default=s},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{"default":e}}Object.defineProperty(t,"__esModule",{value:!0});var a=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},o=n(1),s=r(o),i=n(3),l=r(i),u=n(4),c=r(u),d=s.default.createClass({displayName:"Infinite",getInitialState:function(){return{loading:!1}},getDefaultProps:function(){return{onBottom:function(){},bottomOffset:100}},render:function(){var e=(0,l.default)("infinite",this.props.className);return s.default.createElement("div",a({ref:"infinite"},this.props,{className:e,onScroll:this.handleScroll}),this.props.children,s.default.createElement("div",{className:"infinite-loading"},this.state.loading&&s.default.createElement(c.default,null)))},timer:null,handleBottom:function(){var e=this;clearTimeout(this.timer),this.setState({loading:!0});var t=this.props.onBottom();t&&t.then?t.then(function(){e.setState({loading:!1})},function(){e.setState({loading:!1})}):this.timer=setTimeout(function(){e.setState({loading:!1})},500)},scrollTop:0,handleScroll:function(e){e.target.scrollTop>this.scrollTop&&(this.state.loading||e.target.clientHeight+e.target.scrollTop+this.props.bottomOffset>=e.target.scrollHeight&&this.handleBottom()),this.scrollTop=e.target.scrollTop}});t.default=d},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{"default":e}}Object.defineProperty(t,"__esModule",{value:!0});var a=n(1),o=r(a),s=n(10),i=r(s),l="_mgm_nprogress_container"+(Math.random()+"").slice(2),u=document.getElementById(l);u||(u=document.createElement("div"),u.className="nprogress-container",u.id=l,document.body.appendChild(u));var c={start:function(){i.default.unmountComponentAtNode(u),i.default.render(o.default.createElement(d,null),u)},done:function(){i.default.render(o.default.createElement(d,{precent:100}),u),setTimeout(function(){i.default.unmountComponentAtNode(u)},250)}},d=o.default.createClass({displayName:"NProgress",statics:c,getInitialState:function(){return{precent:0}},componentWillReceiveProps:function(e){e.precent&&(clearTimeout(this.timer),this.setState({precent:e.precent}))},render:function(){var e=100-this.state.precent;return o.default.createElement("div",{className:"nprogress",style:{transform:"translate3d(-"+e+"%, 0px, 0px)"}},o.default.createElement("div",{className:"nprogress-head"}))},componentDidMount:function(){this.doInc()},componentWillUnmount:function(){clearTimeout(this.timer)},doInc:function(){var e=this;e.timer=setTimeout(function(){e.setState({precent:e.state.precent+.2*(100-e.state.precent)}),e.state.precent<90&&e.doInc()},150)}});t.default=d},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{"default":e}}Object.defineProperty(t,"__esModule",{value:!0});var a=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},o=n(1),s=r(o),i=n(3),l=r(i),u=n(8),c=r(u),d=s.default.createClass({displayName:"Page",propTypes:{children:o.PropTypes.node,className:o.PropTypes.string,white:o.PropTypes.bool,header:o.PropTypes.node,tabbar:o.PropTypes.node},getDefaultProps:function(){return{}},render:function(){var e=(0,l.default)({page:!0,"page-white":this.props.white},this.props.className);return this.props.header||this.props.tabbar?s.default.createElement(c.default,a({column:!0},this.props,{className:e}),this.props.header&&s.default.createElement(c.default,{column:!0},this.props.header),s.default.createElement(c.default,{flex:!0,column:!0,className:"page-content block"},this.props.children),this.props.tabbar&&s.default.createElement(c.default,{column:!0,className:"page-tabbar"},this.props.tabbar)):s.default.createElement("div",{className:e},this.props.children)}});t.default=d},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{"default":e}}Object.defineProperty(t,"__esModule",{value:!0});var a=n(1),o=r(a),s=n(2),i=r(s),l=o.default.PropTypes,u="_react-gmm_",c=o.default.createClass({displayName:"Storage",statics:{set:function(e,t){localStorage.setItem(u+e,JSON.stringify(t))},get:function(e){var t=localStorage.getItem(u+e);return t?JSON.parse(t):t},remove:function(e){localStorage.removeItem(u+e)},clear:function(){localStorage.clear()},getAll:function(){for(var e,t={},n=0;n<localStorage.length;n++)e=localStorage.key(n),e.startsWith(u)&&(e=e.slice(u.length),t[e]=c.get(e));return i.default.keys(t)?t:null}},propTypes:{name:l.string.isRequired,value:l.oneOfType([l.string,l.object,l.array]),autoSave:l.bool},getDefaultProps:function(){return{autoSave:!0}},save:function(){c.set(this.props.name,value)},componentWillUpdate:function(){this.props.autoSave&&this.save()},componentWillMount:function(){this.save()},render:function(){return null}});t.default=c},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{"default":e}}Object.defineProperty(t,"__esModule",{value:!0});var a=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},o=n(1),s=r(o),i=n(3),l=r(i),u=n(2),c=(r(u),s.default.createClass({displayName:"Textarea",render:function(){var e=(0,l.default)({"textarea-adapter":!0});return s.default.createElement("div",{className:e},s.default.createElement("pre",null,this.props.value),s.default.createElement("textarea",a({},this.props,{className:(0,l.default)("weui_textarea",this.props.className)})))}}));t.default=c},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{"default":e}}Object.defineProperty(t,"__esModule",{value:!0});var a=n(1),o=r(a),s=n(10),i=r(s),l=n(9),u=r(l),c=n(4),d=r(c),f=n(2),p=r(f),h="_mgm_toasts_container"+(Math.random()+"").slice(2),m=document.getElementById(h);m||(m=document.createElement("div"),m.className="mgm-toasts",m.id=h,document.body.appendChild(m));var g={};g={_queue:[],_ing:!1,_render:function(){if(!g._ing){var e=g._queue.shift();if(void 0!==e){g._ing=!0;var t=e.onFinish,n=document.createElement("div");return n.className="mgm-toasts-cell",m.appendChild(n),e.onFinish=function(){t&&t(),m.removeChild(n),g._ing=!1,g._queue.length>0&&setTimeout(function(){g._render()},500)},i.default.render(o.default.createElement(_,e,e.children),n),n}}},clear:function(e){i.default.unmountComponentAtNode(e)},tip:function(e){return"string"==typeof e&&(e={children:e}),e=p.default.extend({show:!0},e),g._queue.push(e),g._render()},success:function(e){return"string"==typeof e&&(e={children:e}),g.tip(p.default.extend({success:!0},e))},info:function(e){return"string"==typeof e&&(e={children:e}),g.tip(p.default.extend({info:!0},e))},warning:function(e){return"string"==typeof e&&(e={children:e}),g.tip(p.default.extend({warning:!0},e))},danger:function(e){return"string"==typeof e&&(e={children:e}),g.tip(p.default.extend({danger:!0},e))},loading:function(e){return"string"==typeof e&&(e={children:e}),g.tip(p.default.extend({loading:!0},e))}};var _=o.default.createClass({displayName:"Toast",statics:g,propTypes:{onClick:o.default.PropTypes.func,onFinish:o.default.PropTypes.func,show:o.default.PropTypes.bool,time:o.default.PropTypes.any,loading:o.default.PropTypes.bool,icon:o.default.PropTypes.any,success:o.default.PropTypes.bool,info:o.default.PropTypes.bool,warning:o.default.PropTypes.bool,danger:o.default.PropTypes.bool},getDefaultProps:function(){return{show:!1,time:2e3,loading:!1,icon:null,onClick:function(){},onFinish:function(){}}},getInitialState:function(){return{show:this.props.show}},componentWillReceiveProps:function(e){void 0!==e.show&&this.setState({show:e.show})},render:function(){var e=this.props.icon,t=this.props.children;return this.props.loading?(e=o.default.createElement(d.default,null),t=t||"加载中..."):this.props.success?e=o.default.createElement("i",{className:"ifont ifont-success"}):this.props.info?e=o.default.createElement("i",{className:"ifont ifont-info-circle"}):this.props.warning?e=o.default.createElement("i",{className:"ifont ifont-warning"}):this.props.danger&&(e=o.default.createElement("i",{className:"ifont ifont-close"})),o.default.createElement("div",{style:{display:this.state.show?"block":"none"}},o.default.createElement(u.default,{show:this.state.show,opacity:.1}),o.default.createElement("div",{className:"toast-container"},o.default.createElement("div",{className:"toast",onClick:this.handleClick},e,o.default.createElement("div",{className:"toast-content"},t))))},timer:null,componentDidMount:function(){var e=this;e.props.time&&(e.timer=setTimeout(function(){e.setState({show:!1}),e.handleFinish()},e.props.time))},componentWillUnmount:function(){var e=this;clearTimeout(e.timer),e.setState({show:!1}),e.handleFinish()},componentDidUpdate:function(){this.state.show===!1&&this.handleFinish()},handleClick:function(){this.props.onClick()},isFinished:!1,handleFinish:function(){this.isFinished||(this.isFinished=!0,this.props.onFinish())}});t.default=_},function(e,t){}])});